import{r as n,j as e,d as v,a as S,B as w,S as T,f as y}from"./index--Iq5HRU2.js";function E({questionSet:a=[]}){const[d,c]=n.useState(0),[i,r]=n.useState(a[0]||null);return n.useEffect(()=>{a.length>0&&(r(a[0]),c(0))},[a]),i?e.jsx(e.Fragment,{children:e.jsxs("section",{className:"flex p-5",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("h1",{children:["Q",d+1+". ",(i==null?void 0:i.question)||"No question available"]}),e.jsx("div",{className:"flex gap-3 flex-col pl-0 p-5",children:i.answerOptions.map((l,s)=>e.jsxs("label",{className:"py-3 w-[430px]  px-4 flex items-center gap-2 rounded-full bg-sky-700 cursor-pointer",children:[e.jsx("input",{type:"radio",name:i._id||i.question,value:l._id,className:"hidden",onClick:()=>console.log("Selected:",l.text)}),e.jsx("span",{className:"text-white",children:l.text})]},l._id||s))})]}),e.jsx("div",{className:"flex-[.6]",children:e.jsx("div",{className:"grid grid-cols-4 gap-2",children:a.map((l,s)=>e.jsx("button",{className:`h-6 w-6 flex justify-center items-center text-[#f3f3f3] p-4 rounded-full ${s===d?"bg-blue-800":"bg-sky-600"}`,onClick:()=>{c(s),r(a[s])},children:s+1},l._id||s))})})]})}):e.jsx("div",{children:"Loading questions..."})}function _({userId:a,testId:d}){var u,f,h;const[c,i]=n.useState(null),[r,l]=n.useState(0),[s,j]=n.useState(null),[m,x]=n.useState(0),{user:N}=v(t=>t.auth);n.useEffect(()=>{S.get(`${w}/api/v2/test/submission?userId=${N._id}&testId=67ea77d2154bf8601ff1b1f4`).then(t=>{console.log("Fetched Test Data:",t.data),i(t.data.testSubmission),j(t.data.test)}).catch(t=>{console.error("Failed to fetch test data:",t)})},[a,d]),n.useEffect(()=>{if(s&&c){const o=new Date(c.createdAt).getTime()+s.duration*60*1e3,g=setInterval(()=>{const p=o-Date.now();l(Math.max(p,0)),p<=0&&(clearInterval(g),b())},1e3);return()=>clearInterval(g)}},[c,s]),n.useEffect(()=>{var t;((t=s==null?void 0:s.sections)==null?void 0:t.length)>0&&x(0)},[s]);const b=()=>{console.log("Time's up! Submitting test...")};return e.jsxs(e.Fragment,{children:[e.jsx("header",{className:"flex gap-8 relative h-[70px] items-center left-0 shadow-sm w-full p-4",children:e.jsxs("nav",{className:"flex gap-8 fixed h-[70px] z-20 justify-between bg-white left-0 top-0 items-center shadow-sm w-full p-4",children:[e.jsx("div",{className:"flex items-center gap-5",children:e.jsx("img",{src:"/assets/logo/F1948A99-E208-45B2-A79C-D1E5FCE620AA_4_5005_c.jpeg",className:"h-12",alt:"Logo"})}),e.jsx("div",{className:"flex gap-5",children:r>0?e.jsxs("div",{className:"flex gap-4 items-center px-3 p-1 bg-white text-gray-900 rounded-2xl shadow-md",children:[e.jsxs("div",{className:"flex items-center gap-2 text-md font-semibold",children:[e.jsx("span",{className:"text-lg animate-pulse",children:"⏳"}),Math.floor(r/6e4),"m"]}),e.jsx(T,{orientation:"vertical",flexItem:!0,className:"border-gray-300"}),e.jsxs("div",{className:"flex items-center gap-2 text-md font-semibold",children:[e.jsx("span",{className:"text-lg animate-pulse",children:"⏱️"}),Math.floor(r%6e4/1e3),"s"]})]}):e.jsx("span",{className:"text-red-500 font-bold",children:"Time's Up! Submitting..."})}),e.jsx("div",{className:"flex gap-5 items-center",children:((u=s==null?void 0:s.sections)==null?void 0:u.length)>0?s.sections.map((t,o)=>e.jsx("div",{onClick:()=>x(o),className:`cursor-pointer px-4 py-1 text-sm text-white border ${o===m?"bg-green-600":"bg-orange-500"}`,children:t.name},o)):e.jsx("p",{className:"text-gray-500",children:"No sections available"})})]})}),(h=(f=s==null?void 0:s.sections)==null?void 0:f[m])!=null&&h.questionSet?e.jsx(E,{questionSet:s.sections[m].questionSet}):e.jsx("p",{className:"text-center mt-10 text-gray-500",children:"Loading quiz..."})]})}function I(){const{id:a}=y();return e.jsx(e.Fragment,{children:e.jsx(_,{id:a})})}export{I as default};
